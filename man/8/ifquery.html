<!DOCTYPE html>
<html lang=en-US>
<head>
<meta charset=utf-8>
<title>Linux command ifquery</title><meta name="description" content="Linux command ifquery parse interface configuration"><meta name="keywords" content="linux, command, ifquery, bsd, parse interface configuration"><meta name="robots" content="index,follow">
<meta name="viewport" content="width=device-width, initial-scale=1">
</head>
<body>
<div class="container">

<h1>NAME</h1>
<p>ifup - bring a network interface up</p>
<p>ifdown - take a network interface down</p>
<p>ifquery - parse interface configuration</p>
<h1>SYNOPSIS</h1>
<p><strong>ifup</strong> [<strong>-nv</strong>] [<strong>--no-act</strong>] [<strong>--verbose</strong>] [<strong>-i</strong> <em>FILE</em>|<strong>--interfaces=</strong><em>FILE</em>] [<strong>--state-dir=</strong><em>DIR</em>] [<strong>--allow</strong> <em>CLASS</em>] <strong>-a</strong>|<em>IFACE</em>...<br />
<strong>ifup</strong> <strong>-h</strong>|<strong>--help</strong><br />
<strong>ifup</strong> <strong>-V</strong>|<strong>--version</strong></p>
<p><strong>ifdown</strong> [<strong>-nv</strong>] [<strong>--no-act</strong>] [<strong>--verbose</strong>] [<strong>-i</strong> <em>FILE</em>|<strong>--interfaces=</strong><em>FILE</em>] [<strong>--state-dir=</strong><em>DIR</em>] [<strong>--allow</strong> <em>CLASS</em>] <strong>-a</strong>|<em>IFACE</em>...</p>
<p><strong>ifquery</strong> [<strong>-nv</strong>] [<strong>--verbose</strong>] [<strong>-i</strong> <em>FILE</em>|<strong>--interfaces=</strong><em>FILE</em>] [<strong>--state-dir=</strong><em>DIR</em>] [<strong>--allow</strong> <em>CLASS</em>] <em>IFACE</em>...</p>
<p><strong>ifquery</strong> <strong>-l</strong>|<strong>--list</strong> [<strong>-nv</strong>] [<strong>--verbose</strong>] [<strong>-i</strong> <em>FILE</em>|<strong>--interfaces=</strong><em>FILE</em>] [<strong>--state-dir=</strong><em>DIR</em>] [<strong>--allow</strong> <em>CLASS</em>] [<strong>-a</strong>|<em>IFACE</em>...]</p>
<p><strong>ifquery</strong> <strong>--state</strong> [<strong>--state-dir=</strong><em>DIR</em>] [<strong>--allow</strong> <em>CLASS</em>] [<strong>-a</strong>|<em>IFACE</em>...]</p>
<h1>DESCRIPTION</h1>
<p>The <strong>ifup</strong> and <strong>ifdown</strong> commands may be used to configure (or, respectively, deconfigure) network interfaces based on interface definitions in the file <em>/etc/network/interfaces</em>. <strong>ifquery</strong> command may be used to parse interfaces configuration.</p>
<h1>OPTIONS</h1>
<p>A summary of options is included below.</p>
<dl>
<dt><strong>-a</strong>, <strong>--all</strong></dt>
<dd><p>If given to <strong>ifup</strong>, affect all interfaces marked <strong>auto</strong>. Interfaces are brought up in the order in which they are defined in <em>/etc/network/interfaces</em>. Combined with <strong>--allow</strong>, acts on all interfaces of a specified class instead. If given to <strong>ifdown</strong>, affect all defined interfaces. Interfaces are brought down in the order in which they are currently listed in the state file. Only interfaces defined in <em>/etc/network/interfaces</em> will be brought down.</p>
</dd>
<dt><strong>--force</strong></dt>
<dd><p>Force configuration or deconfiguration of the interface.</p>
</dd>
<dt><strong>--ignore-errors</strong></dt>
<dd><p>If any of the commands of scripts fails, continue.</p>
</dd>
<dt><strong>-h</strong>, <strong>--help</strong></dt>
<dd><p>Show summary of options.</p>
</dd>
<dt><strong>--allow=</strong><em>CLASS</em></dt>
<dd><p>Only allow interfaces listed in an <em>allow-CLASS</em> line in <em>/etc/network/interfaces</em> to be acted upon.</p>
</dd>
<dt><strong>-i</strong> <em>FILE</em>, <strong>--interfaces=</strong><em>FILE</em></dt>
<dd><p>Read interface definitions from <em>FILE</em> instead of from <em>/etc/network/interfaces</em>.</p>
</dd>
<dt><strong>--state-dir=</strong><em>DIR</em></dt>
<dd><p>Keep interface state in <em>DIR</em> instead of in <em>/run/network</em>.</p>
</dd>
<dt><strong>-X</strong><em> PATTERN, </em><strong>--exclude=</strong><em>PATTERN</em></dt>
<dd><p>Exclude interfaces from the list of interfaces to operate on by the <em>PATTERN</em>. <em>PATTERN</em> uses a usual shell glob syntax. If shell wildcards are not used, it must match the exact interface name. This option may be specified multiple times resulting in more than one pattern being excluded.</p>
</dd>
<dt><strong>-o</strong><em> OPTION</em><strong><strong>=</strong></strong><em>VALUE</em></dt>
<dd><p>Set <em>OPTION</em> to <em>VALUE</em> as though it were in <em>/etc/network/interfaces</em>.</p>
</dd>
<dt><strong>-n</strong>, <strong>--no-act</strong></dt>
<dd><p>Don't configure any interfaces or run any "up" or "down" commands.</p>
</dd>
<dt><strong>--no-mappings</strong></dt>
<dd><p>Don't run any mappings. See <strong>interfaces</strong>(5) for more information about the mapping feature.</p>
</dd>
<dt><strong>--no-scripts</strong></dt>
<dd><p>Don't run any scripts under /etc/network/if-*.d/</p>
</dd>
<dt><strong>--no-loopback</strong></dt>
<dd><p>Disable special handling of the loopback interface. By default, the loopback interface (<em>lo</em> on Linux) is predefined internally as an auto interface, so it's brought up on <strong>ifup -a</strong> automatically. In the case the loopback device is redefined by user, the interface is configured just once anyway. If, however, another interface is also defined as loopback, it's configured as usual. Specifying this option disables this behaviour, so the loopback interface won't be configured automatically.</p>
</dd>
<dt><strong>-V</strong>, <strong>--version</strong></dt>
<dd><p>Show copyright and version information.</p>
</dd>
<dt><strong>-v</strong>, <strong>--verbose</strong></dt>
<dd><p>Show commands as they are executed.</p>
</dd>
<dt><strong>-l</strong>, <strong>--list</strong></dt>
<dd><p>For <strong>ifquery</strong>, list all the interfaces which match the specified class. If no class specified, prints all the interfaces listed as <strong>auto</strong>.</p>
</dd>
<dt><strong>--state</strong></dt>
<dd><p>For <strong>ifquery</strong>, dump the state of the interfaces. When no interfaces specified, lists all interfaces brought up together with logical interfaces assigned to them and exits with a status code indicating success. If one or more interfaces specified, display state of these interfaces only; successful code is returned if all of interfaces given as arguments are up. Otherwise, 0 is returned.</p>
</dd>
</dl>
<h1>EXAMPLES</h1>
<dl>
<dt><strong>ifup -a</strong></dt>
<dd><p>Bring up all the interfaces defined with <em>auto</em> in <em>/etc/network/interfaces</em></p>
</dd>
<dt><strong>ifup eth0</strong></dt>
<dd><p>Bring up interface <strong>eth0</strong></p>
</dd>
<dt><strong>ifup eth0=home</strong></dt>
<dd><p>Bring up interface <strong>eth0</strong> as logical interface <strong>home</strong></p>
</dd>
<dt><strong>ifdown -a</strong></dt>
<dd><p>Bring down all interfaces that are currently up.</p>
</dd>
<dt><strong>ifquery -l</strong></dt>
<dd><p>Print names of all interfaces specified with the <strong>auto</strong> keyword.</p>
</dd>
<dt><strong>ifquery -l --allow=hotplug</strong></dt>
<dd><p>Print names of all interfaces specified with the <strong>allow-hotplug</strong> keyword.</p>
</dd>
<dt><strong>ifquery eth0</strong></dt>
<dd><p>Display the interface options as specified in the <strong>ifupdown</strong> configuration. Each key-value pair is printed out on individual line using "<strong>: </strong>" as separator.</p>
</dd>
</dl>
<h1>NOTES</h1>
<p><strong>ifup</strong>, <strong>ifdown</strong>, and <strong>ifquery</strong> are actually the same program called by different names.</p>
<p>The program does not configure network interfaces directly; it runs low level utilities such as <strong>ip</strong> to do its dirty work.</p>
<p>When invoked, <strong>ifdown</strong> checks if <strong>ifup</strong> is still running. In that case, <strong>SIGTERM</strong> is sent to ifup.</p>
<p>During interface deconfiguration, <strong>ifdown</strong> ignores errors the same way as if <strong>--ignore-errors</strong> was specified.</p>
<h1>FILES</h1>
<dl>
<dt><em>/etc/network/interfaces</em></dt>
<dd><p>definitions of network interfaces See <strong>interfaces</strong>(5) for more information.</p>
</dd>
<dt><em>/run/network/ifstate</em></dt>
<dd><p>current state of network interfaces</p>
</dd>
</dl>
<h1>CONCURRENCY</h1>
<p>Ifupdown uses per-interface locking to ensure that concurrent ifup and ifdown calls to the same interface are run in serial. However, calls to different interfaces will be able to run in parallel.</p>
<h1>EXIT STATUS</h1>
<p>For <strong>ifup</strong> and <strong>ifdown,</strong> the exit status will be 0 if the given interface(s) have all been (de)configured successfully, 1 if there was any error. The result of these commands is idempotent; running <strong>ifup</strong> on an interface that is already up will result in an exit status of 0, and similarly running <strong>ifdown</strong> on an interface that is not up will also result in an exit status of 0.</p>
<p><strong>ifquery</strong> will normally return with exit status 0 if an interface with a matching iface stanza, 1 if there is no matching stanza. <strong>ifquery --state</strong> will also return with exit status 1 if the given interface was known but was not up.</p>
<h1>KNOWN BUGS/LIMITATIONS</h1>
<p>The program keeps records of whether network interfaces are up or down. Under exceptional circumstances these records can become inconsistent with the real states of the interfaces. For example, an interface that was brought up using <strong>ifup</strong> and later deconfigured using <strong>ifconfig</strong> will still be recorded as up. To fix this you can use the <strong>--force</strong> option to force <strong>ifup</strong> or <strong>ifdown</strong> to run configuration or deconfiguration commands despite what it considers the current state of the interface to be.</p>
<p>The file <em>/run/network/ifstate</em> must be writable for <strong>ifup</strong> or <strong>ifdown</strong> to work properly. If that location is not writable (for example, because the root filesystem is mounted read-only for system recovery) then <em>/run/network/ifstate</em> should be made a symbolic link to a writable location. If that is not possible then you can use the <strong>--force</strong> option to run configuration or deconfiguration commands without updating the file.</p>
<p>Note that the program does not run automatically: <strong>ifup</strong> alone does not bring up interfaces that appear as a result of hardware being installed and <strong>ifdown</strong> alone does not bring down interfaces that disappear as a result of hardware being removed. To automate the configuration of network interfaces you need to install other packages such as <strong>udev</strong>(7) or <strong>ifplugd</strong>(8).</p>
<h1>AUTHORS</h1>
<p>The ifupdown suite was created by Anthony Towns &lt;aj@azure.humbug.org.au&gt;, currently maintained by Santiago Ruano Rincón &lt;santiago@debian.org&gt; and Josue Ortega &lt;josue@debian.org&gt;</p>
<p>Many others have helped develop ifupdown over time, see /usr/share/doc/ifupdown/changelog.Debian.gz for a full history.</p>
<h1>SEE ALSO</h1>
<p><strong>interfaces</strong>(5), <strong>ip</strong>(8), <strong>ifconfig</strong>(8).</p>
<footer style="text-align: center;"><a href="https://blog.tamer.pw" target="_blank">Blog</a> | <a href="https://github.com/linuxtamer" target="_blank">Contact</a></footer>
</div>
</body>
</html>

