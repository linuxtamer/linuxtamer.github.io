<!DOCTYPE html>
<html lang=en-US>
<head>
<meta charset=utf-8>
<title>Linux command devlink-health</title><meta name="description" content="Linux command devlink-health devlink health reporting and recovery"><meta name="keywords" content="linux, command, devlink-health, bsd, devlink health reporting and recovery"><meta name="robots" content="index,follow">
<meta name="viewport" content="width=device-width, initial-scale=1">
</head>
<body>
<div class="container">

<h1>NAME</h1>
<p>devlink-health - devlink health reporting and recovery</p>
<h1>SYNOPSIS</h1>
<p><strong>devlink</strong> [ <em>OPTIONS</em> ] <strong>health</strong> { <em>COMMAND</em> | <strong>help</strong> }</p>
<p><em>OPTIONS</em> := { <strong>-V</strong>[<em>ersion</em>] }</p>
<p><strong>devlink health show</strong> [ { <em>DEV</em> | <em>DEV/PORT_INDEX</em> } <strong>reporter</strong> <em>REPORTER</em> ]</p>
<p><strong>devlink health recover</strong> { <em>DEV</em> | <em>DEV/PORT_INDEX</em> } <strong>reporter</strong> <em>REPORTER</em></p>
<p><strong>devlink health diagnose</strong> { <em>DEV</em> | <em>DEV/PORT_INDEX</em> } <strong>reporter</strong> <em>REPORTER</em></p>
<p><strong>devlink health dump show</strong> { <em>DEV</em> | <em>DEV/PORT_INDEX</em> } <strong>reporter</strong> <em>REPORTER</em></p>
<p><strong>devlink health test</strong> { <em>DEV</em> | <em>DEV/PORT_INDEX</em> } <strong>reporter</strong> <em>REPORTER</em></p>
<p><strong>devlink health dump clear</strong> { <em>DEV</em> | <em>DEV/PORT_INDEX</em> } <strong>reporter</strong> <em>REPORTER</em></p>
<p><strong>devlink health set</strong> { <em>DEV</em> | <em>DEV/PORT_INDEX</em> } <strong>reporter</strong> <em>REPORTER</em> [ <strong>grace_period </strong><em>MSEC</em><strong>"</strong> ] [ <strong>auto_recover</strong> { <strong>true</strong> | <strong>false</strong> } ] [ <strong>auto_dump</strong> { <strong>true</strong> | <strong>false</strong> } ]</p>
<p><strong>devlink health help</strong></p>
<h1>DESCRIPTION</h1>
<h2>devlink health show - Show status and configuration on all supported reporters.</h2>
<p>Displays info about reporters registered on devlink devices and ports.</p>
<p><em>DEV</em> - specifies the devlink device.<br />
<em>DEV/PORT_INDEX</em> - specifies the devlink port.</p>
<p><em>REPORTER</em> - specifies the reporter's name registered on specified devlink device or port.</p>
<h2>devlink health recover - Initiate a recovery operation on a reporter.</h2>
<p>This action performs a recovery and increases the recoveries counter on success.</p>
<p><em>DEV</em> - specifies the devlink device.<br />
<em>DEV/PORT_INDEX</em> - specifies the devlink port.</p>
<p><em>REPORTER</em> - specifies the reporter's name registered on specified devlink device or port.</p>
<h2>devlink health diagnose - Retrieve diagnostics data on a reporter.</h2>
<p><em>DEV</em> - specifies the devlink device.<br />
<em>DEV/PORT_INDEX</em> - specifies the devlink port.</p>
<p><em>REPORTER</em> - specifies the reporter's name registered on specified devlink device or port.</p>
<h2>devlink health test - Trigger a test event on a reporter.</h2>
<p><em>DEV</em> - specifies the devlink device.</p>
<p><em>REPORTER</em> - specifies the reporter's name registered on the devlink device.</p>
<h2>devlink health dump show - Display the last saved dump.</h2>
<p>devlink health saves a single dump per reporter. If an dump is</p>
<p>not already stored by the Devlink, this command will generate a new</p>
<p>dump. The dump can be generated either automatically when a</p>
<p>reporter reports on an error or manually at the user's request.</p>
<p><em>DEV</em> - specifies the devlink device.<br />
<em>DEV/PORT_INDEX</em> - specifies the devlink port.</p>
<p><em>REPORTER</em> - specifies the reporter's name registered on specified devlink device or port.</p>
<h2>devlink health dump clear - Delete the saved dump.</h2>
<p>Deleting the saved dump enables a generation of a new dump on</p>
<p>the next "devlink health dump show" command.</p>
<p><em>DEV</em> - specifies the devlink device.<br />
<em>DEV/PORT_INDEX</em> - specifies the devlink port.</p>
<p><em>REPORTER</em> - specifies the reporter's name registered on specified devlink device or port.</p>
<h2>devlink health set - Configure health reporter.</h2>
<p>Please note that some params are not supported on a reporter which doesn't support a recovery or dump method.</p>
<p><em>DEV</em> - specifies the devlink device.<br />
<em>DEV/PORT_INDEX</em> - specifies the devlink port.</p>
<p><em>REPORTER</em> - specifies the reporter's name registered on specified devlink device or port.</p>
<dl>
<dt><strong>grace_period</strong><em> MSEC </em></dt>
<dd><p>Time interval between consecutive auto recoveries.</p>
</dd>
</dl>
<dl>
<dt><strong>auto_recover</strong> { <strong>true</strong> | <strong>false</strong> } </dt>
<dd><p>Indicates whether the devlink should execute automatic recover on error.</p>
</dd>
</dl>
<dl>
<dt><strong>auto_dump</strong> { <strong>true</strong> | <strong>false</strong> } </dt>
<dd><p>Indicates whether the devlink should execute automatic dump on error.</p>
</dd>
</dl>
<h1>EXAMPLES</h1>
<p>devlink health show</p>
<blockquote>
<p>List status and configuration of available reporters on devices and ports.</p>
</blockquote>
<p>devlink health show pci/0000:00:09.0/1 reporter tx</p>
<blockquote>
<p>List status and configuration of tx reporter registered on port on pci/0000:00:09.0/1</p>
</blockquote>
<p>devlink health recover pci/0000:00:09.0 reporter fw_fatal</p>
<blockquote>
<p>Initiate recovery on fw_fatal reporter registered on device on pci/0000:00:09.0.</p>
</blockquote>
<p>devlink health recover pci/0000:00:09.0/1 reporter tx</p>
<blockquote>
<p>Initiate recovery on tx reporter registered on port on pci/0000:00:09.0/1.</p>
</blockquote>
<p>devlink health diagnose pci/0000:00:09.0 reporter fw</p>
<blockquote>
<p>List diagnostics data on the specified device and reporter.</p>
</blockquote>
<p>devlink health dump show pci/0000:00:09.0/1 reporter tx</p>
<blockquote>
<p>Display the last saved dump on the specified port and reporter.</p>
</blockquote>
<p>devlink health dump clear pci/0000:00:09.0/1 reporter tx</p>
<blockquote>
<p>Delete saved dump on the specified port and reporter.</p>
</blockquote>
<p>devlink health set pci/0000:00:09.0 reporter fw_fatal grace_period 3500</p>
<blockquote>
<p>Set time interval between auto recoveries to minimum of 3500 msec on the specified device and reporter.</p>
</blockquote>
<p>devlink health set pci/0000:00:09.0/1 reporter tx grace_period 3500</p>
<blockquote>
<p>Set time interval between auto recoveries to minimum of 3500 msec on the specified port and reporter.</p>
</blockquote>
<p>devlink health set pci/0000:00:09.0 reporter fw_fatal auto_recover false</p>
<blockquote>
<p>Turn off auto recovery on the specified device and reporter.</p>
</blockquote>
<h1>SEE ALSO</h1>
<p><strong>devlink</strong>(8), <strong>devlink-dev</strong>(8), <strong>devlink-port</strong>(8), <strong>devlink-param</strong>(8), <strong>devlink-region</strong>(8),<br />
</p>
<h1>AUTHOR</h1>
<p>Aya Levin &lt;ayal@mellanox.com&gt;</p>
<footer style="text-align: center;"><a href="https://blog.tamer.pw" target="_blank">Blog</a> | <a href="https://github.com/linuxtamer" target="_blank">Contact</a></footer>
</div>
</body>
</html>

