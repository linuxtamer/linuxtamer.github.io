<!DOCTYPE html>
<html lang=en-US>
<head>
<meta charset=utf-8>
<title>Linux command rdma-statistic</title><meta name="description" content="Linux command rdma-statistic RDMA statistic counter configuration"><meta name="keywords" content="linux, command, rdma-statistic, bsd, RDMA statistic counter configuration"><meta name="robots" content="index,follow">
<meta name="viewport" content="width=device-width, initial-scale=1">
</head>
<body>
<div class="container">

<h1>NAME</h1>
<p>rdma-statistic - RDMA statistic counter configuration</p>
<h1>SYNOPSIS</h1>
<p><strong>rdma</strong> [ <em>OPTIONS</em> ] <strong>statistic</strong> { <em>COMMAND</em> | <strong>help</strong> }</p>
<p><strong>rdma statistic</strong> { <em>OBJECT</em> } <strong>show</strong></p>
<p><strong>rdma statistic</strong> [ <em>OBJECT</em> ] <strong>show link</strong> [ <em>DEV/PORT_INDX</em> ] [ <em>FILTER_NAME</em> <em>FILTER_VALUE</em> ]</p>
<p><strong>rdma statistic</strong> <em>OBJECT</em> <strong>mode</strong></p>
<p><strong>rdma statistic</strong> <em>OBJECT</em> <strong>set</strong> <em>COUNTER_SCOPE</em> [ <em>DEV/PORT_INDEX</em> ] <strong>auto</strong> { <em>CRITERIA</em> | <strong>off</strong> }</p>
<p><strong>rdma statistic</strong> <em>OBJECT</em> <strong>bind</strong> <em>COUNTER_SCOPE</em> [ <em>DEV/PORT_INDEX</em> ] [ <em>OBJECT-ID</em> ] [ <em>COUNTER-ID</em> ]</p>
<p><strong>rdma statistic</strong> <em>OBJECT</em> <strong>unbind</strong> <em>COUNTER_SCOPE</em> [ <em>DEV/PORT_INDEX</em> ] [ <em>COUNTER-ID</em> ] [ <em>OBJECT-ID</em> ]</p>
<p><em>COUNTER_SCOPE</em> := { <strong>link</strong> | <strong>dev</strong> }</p>
<p><em>OBJECT</em> := { <strong>qp</strong> | <strong>mr</strong> }</p>
<p><em>CRITERIA</em> := { <strong>type</strong> | <strong>pid</strong> }</p>
<p><em>FILTER_NAME</em> := { <strong>cntn</strong> | <strong>lqpn</strong> | <strong>pid</strong> | <strong>qp-type</strong> }</p>
<h1>DESCRIPTION</h1>
<h2>rdma statistic [object] show - Queries the specified RDMA device for RDMA and driver-specific statistics. Show the default hw counters if object is not specified</h2>
<p><em>DEV</em> - specifies counters on this RDMA device to show.</p>
<p><em>PORT_INDEX</em> - specifies counters on this RDMA port to show.</p>
<p><em>"FILTER_NAME</em> - specifies a filter to show only the results matching it.</p>
<h2>rdma statistic &lt;object&gt; set - configure counter statistic auto-mode for a specific device/port</h2>
<p>In auto mode all objects belong to one category are bind automatically to a single counter set. The "off" is global for all auto modes together. Not applicable for MR's.</p>
<h2>rdma statistic &lt;object&gt; bind - manually bind an object (e.g., a qp) with a counter</h2>
<p>When bound the statistics of this object are available in this counter. Not applicable for MR's.</p>
<h2>rdma statistic &lt;object&gt; unbind - manually unbind an object (e.g., a qp) from the counter previously bound</h2>
<p>When unbound the statistics of this object are no longer available in this counter; And if object id is not specified then all objects on this counter will be unbound. Not applicable for MR's.</p>
<p><em>COUNTER-ID</em> - specifies the id of the counter to be bound. If this argument is omitted then a new counter will be allocated.</p>
<h1>EXAMPLES</h1>
<p>rdma statistic show</p>
<blockquote>
<p>Shows the state of the default counter of all RDMA devices on the system.</p>
</blockquote>
<p>rdma statistic show link mlx5_2/1</p>
<blockquote>
<p>Shows the state of the default counter of specified RDMA port</p>
</blockquote>
<p>rdma statistic qp show</p>
<blockquote>
<p>Shows the state of all qp counters of all RDMA devices on the system.</p>
</blockquote>
<p>rdma statistic qp show link mlx5_2/1</p>
<blockquote>
<p>Shows the state of all qp counters of specified RDMA port.</p>
</blockquote>
<p>rdma statistic qp show link mlx5_2 pid 30489</p>
<blockquote>
<p>Shows the state of all qp counters of specified RDMA port and belonging to pid 30489</p>
</blockquote>
<p>rdma statistic qp show link mlx5_2 qp-type UD</p>
<blockquote>
<p>Shows the state of all qp counters of specified RDMA port and with QP type UD</p>
</blockquote>
<p>rdma statistic qp mode</p>
<blockquote>
<p>List current counter mode on all devices</p>
</blockquote>
<p>rdma statistic qp mode link mlx5_2/1</p>
<blockquote>
<p>List current counter mode of device mlx5_2 port 1</p>
</blockquote>
<p>rdma statistic qp set link mlx5_2/1 auto type on</p>
<blockquote>
<p>On device mlx5_2 port 1, for each new user QP bind it with a counter automatically. Per counter for QPs with same qp type.</p>
</blockquote>
<p>rdma statistic qp set link mlx5_2/1 auto pid on</p>
<blockquote>
<p>On device mlx5_2 port 1, for each new user QP bind it with a counter automatically. Per counter for QPs with same pid.</p>
</blockquote>
<p>rdma statistic qp set link mlx5_2/1 auto pid,type on</p>
<blockquote>
<p>On device mlx5_2 port 1, for each new user QP bind it with a counter automatically. Per counter for QPs with same pid and same type.</p>
</blockquote>
<p>rdma statistic qp set link mlx5_2/1 auto off</p>
<blockquote>
<p>Turn-off auto mode on device mlx5_2 port 1. The allocated counters can be manually accessed.</p>
</blockquote>
<p>rdma statistic qp bind link mlx5_2/1 lqpn 178</p>
<blockquote>
<p>On device mlx5_2 port 1, allocate a counter and bind the specified qp on it</p>
</blockquote>
<p>rdma statistic qp unbind link mlx5_2/1 cntn 4 lqpn 178</p>
<blockquote>
<p>On device mlx5_2 port 1, bind the specified qp on the specified counter</p>
</blockquote>
<p>rdma statistic qp unbind link mlx5_2/1 cntn 4</p>
<blockquote>
<p>On device mlx5_2 port 1, unbind all QPs on the specified counter. After that this counter will be released automatically by the kernel.</p>
</blockquote>
<p>rdma statistic show mr</p>
<blockquote>
<p>List all currently allocated MR's and their counters.</p>
</blockquote>
<p>rdma statistic show mr mrn 6</p>
<blockquote>
<p>Dump a specific MR statistics with mrn 6. Dumps nothing if does not exists.</p>
</blockquote>
<h1>SEE ALSO</h1>
<p><strong>rdma</strong>(8), <strong>rdma-dev</strong>(8), <strong>rdma-link</strong>(8), <strong>rdma-resource</strong>(8),<br />
</p>
<h1>AUTHORS</h1>
<p>Mark Zhang &lt;markz@mellanox.com&gt;<br />
Erez Alfasi &lt;ereza@mellanox.com&gt;</p>
<footer style="text-align: center;"><a href="https://blog.tamer.pw" target="_blank">Blog</a> | <a href="https://github.com/linuxtamer" target="_blank">Contact</a></footer>
</div>
</body>
</html>

